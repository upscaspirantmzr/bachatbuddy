<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BachatBuddy - Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
  <script src="firebase-config.js"></script>
  <script src="https://kit.fontawesome.com/a2d9d6a4d5.js" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-100 min-h-screen flex">

  <!-- Sidebar -->
  <div id="sidebar" class="bg-teal-700 text-white w-64 min-h-screen p-5 space-y-6 fixed md:relative md:translate-x-0 transform -translate-x-full transition-transform duration-200 ease-in-out">
    <h1 class="text-2xl font-bold">💸 BachatBuddy</h1>
    <nav class="space-y-4">
      <button onclick="showTab('profile')" class="block w-full text-left hover:bg-teal-600 p-2 rounded">👤 My Profile</button>
      <button onclick="showTab('explore')" class="block w-full text-left hover:bg-teal-600 p-2 rounded">🛍️ Explore Deals</button>
      <button onclick="showTab('saved')" class="block w-full text-left hover:bg-teal-600 p-2 rounded">⭐ Saved Deals</button>
      <button onclick="showTab('notifications')" class="block w-full text-left hover:bg-teal-600 p-2 rounded">🔔 Notifications</button>
      <button onclick="logout()" class="block w-full text-left bg-red-600 hover:bg-red-500 p-2 rounded">🚪 Logout</button>
    </nav>
  </div>

  <!-- Content -->
  <div class="flex-1 p-6 ml-0 md:ml-64">
    <!-- Mobile toggle button -->
    <button onclick="toggleSidebar()" class="md:hidden mb-4 bg-teal-600 text-white px-4 py-2 rounded"><i class="fas fa-bars"></i></button>

    <!-- Tabs -->
    <div id="profile" class="tab">
      <h2 class="text-2xl font-bold mb-4">👤 My Profile</h2>
      <form class="bg-white p-6 rounded shadow space-y-4 max-w-lg">
        <label class="block">
          <span class="text-gray-700">Full Name</span>
          <input type="text" id="profileName" class="w-full p-2 border rounded">
        </label>
        <label class="block">
          <span class="text-gray-700">Email</span>
          <input type="email" id="profileEmail" class="w-full p-2 border rounded" disabled>
        </label>
        <label class="block">
          <span class="text-gray-700">Resume Link (Google Drive/LinkedIn)</span>
          <input type="url" id="resumeLink" class="w-full p-2 border rounded">
        </label>
        <button type="button" class="bg-teal-600 text-white px-4 py-2 rounded hover:bg-teal-500">Save Changes</button>
      </form>
    </div>

    <div id="explore" class="tab hidden">
      <h2 class="text-2xl font-bold mb-4">🛍️ Explore Deals</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Example deal card -->
        <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
          <h3 class="font-bold">50% Off on Swiggy 🍔</h3>
          <p class="text-sm text-gray-600">Valid on orders above ₹299. Limited time!</p>
          <div class="mt-3 flex justify-between">
            <a href="#" class="bg-teal-600 text-white px-3 py-1 rounded hover:bg-teal-500">Get Deal</a>
            <button class="text-yellow-500"><i class="fas fa-star"></i></button>
          </div>
        </div>
      </div>
    </div>

    <div id="saved" class="tab hidden">
      <h2 class="text-2xl font-bold mb-4">⭐ Saved Deals</h2>
      <p class="text-gray-600">Your favorite deals will appear here.</p>
    </div>

    <div id="notifications" class="tab hidden">
      <h2 class="text-2xl font-bold mb-4">🔔 Notifications</h2>
      <ul class="space-y-3">
        <li class="bg-white p-3 rounded shadow">New deal added in Food category!</li>
        <li class="bg-white p-3 rounded shadow">🔥 Hot Deal: Amazon Great Indian Sale starts tomorrow!</li>
      </ul>
    </div>
  </div>

  <script>
    const auth = firebase.auth();

    // Check login state
    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById("profileName").value = user.displayName || "";
        document.getElementById("profileEmail").value = user.email;
      } else {
        window.location.href = "login.html";
      }
    });

    function logout() {
      auth.signOut();
    }

    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      sidebar.classList.toggle("-translate-x-full");
    }

    function showTab(tabId) {
      document.querySelectorAll(".tab").forEach(tab => tab.classList.add("hidden"));
      document.getElementById(tabId).classList.remove("hidden");
    }

    // Default tab
    showTab("profile");
  </script>
</body>
</html>
